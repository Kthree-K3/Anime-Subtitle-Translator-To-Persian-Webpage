# ابزار پیشرفته ترجمه زیرنویس انیمه با Gemini

<div dir="rtl">

این پروژه یک ابزار تحت وب، قدرتمند و کاملاً سمت کاربر (Client-Side) برای ترجمه فایل‌های زیرنویس انیمه (با فرمت‌های `srt` و `ass`) و حتی **باز کردن و پردازش محلی فایل‌های ویدیویی** (مانند `mkv` و `mp4`) برای استخراج و ترجمه مستقیم زیرنویس، با استفاده از مدل‌های هوش مصنوعی پیشرفته گوگل (Gemini) است.

این ابزار، نسخه بهبودیافته و توسعه‌داده‌شده بر پایه [پروژه اولیه Anime-Subtitle-Translator-To-Persian](https://github.com/Kthree-K3/Anime-Subtitle-Translator-To-Persian) است که با افزودن قابلیت‌های کلیدی جدید، کنترل و انعطاف‌پذیری بی‌نظیری را در اختیار مترجمان و علاقه‌مندان به انیمه قرار می‌دهد.

### <a href="https://kthree-k3.github.io/Anime-Subtitle-Translator-To-Persian-Webpage">🔗 **🚀 مشاهده نسخه زنده (Live Demo) 🚀**</a>








</div>

---

<h2 align="right">✨ ویژگی‌های کلیدی نسخه پیشرفته</h2>

<div dir="rtl">
این نسخه ضمن حفظ تمام قابلیت‌های اصلی، ویژگی‌های جدید و قدرتمندی را معرفی می‌کند:
<ul>
  <li><b>🎬 پشتیبانی جامع از فایل‌های ویدیویی و زیرنویس:</b>
    <ul>
      <li><b>باز کردن مستقیم فایل‌های ویدیویی:</b> فایل‌های <code>mkv</code> یا <code>mp4</code> خود را مستقیماً در مرورگر باز کنید. <b>(هیچ فایلی به هیچ سروری آپلود نمی‌شود)</b>.</li>
      <li><b>استخراج هوشمند ترک زیرنویس:</b> ابزار به صورت خودکار تمام ترک‌های زیرنویس موجود در فایل ویدیویی را شناسایی می‌کند.</li>
      <li><b>انتخاب ترک توسط کاربر:</b> شما می‌توانید از بین لیست ترک‌های شناسایی شده (با زبان و فرمت مشخص)، زیرنویس مورد نظر خود را برای ترجمه انتخاب کنید.</li>
      <li><b>پشتیبانی از فرمت <code>ass</code>:</b> علاوه بر <code>srt</code>، فایل‌های زیرنویس با فرمت <code>ass</code> نیز به طور کامل پشتیبانی می‌شوند.</li>
    </ul>
  </li>
  <li><b>📄 خروجی استاندارد و بی‌نقص:</b>
    <ul>
      <li><b>حذف خودکار استایل‌های ASS:</b> هنگام پردازش فایل‌های <code>ass</code>، تمام استایل‌ها (رنگ، فونت، موقعیت و...) به صورت هوشمند حذف می‌شوند تا یک متن خالص و تمیز برای ترجمه آماده شود.</li>
      <li><b>اصلاح پیشرفته RTL:</b> با استفاده از الگوریتمی مشابه "Fix RTL" در نرم‌افزار Subtitle Edit، جهت‌دهی متن راست به چپ برای هر خط به صورت جداگانه اعمال می‌شود تا از نمایش بی‌نقص زیرنویس در تمام پلیرها اطمینان حاصل شود.</li>
    </ul>
  </li>
  <li><b>🧰 مدیریت پیشرفته مدل‌ها (Model Management):</b>
    <ul>
      <li>دیگر به یک مدل خاص محدود نیستید! به راحتی می‌توانید هر یک از مدل‌های Gemini (مانند <code>gemini-1.5-flash</code>, <code>gemini-pro</code> و...) را به لیست اضافه کرده، بین آن‌ها جابجا شوید یا مدل‌های اضافی را حذف کنید.</li>
    </ul>
  </li>
  <li><b>📝 مدیریت و سفارشی‌سازی پرامپت‌ها (Prompt Management):</b>
    <ul>
      <li>یک <b>پرامپت پیش‌فرض بسیار حرفه‌ای</b> برای ترجمه روان و بومی‌سازی شده انیمه تعبیه شده است.</li>
      <li>امکان <b>ایجاد، ویرایش و ذخیره پرامپت‌های سفارشی</b> به شما این قدرت را می‌دهد که سبک ترجمه را دقیقاً مطابق با سلیقه یا نیاز پروژه خود تنظیم کنید.</li>
    </ul>
  </li>
  <li><b>💻 رابط کاربری مدرن و بهبودیافته:</b>
    <ul>
      <li>طراحی تمیز و تاریک با تمرکز بر تجربه کاربری.</li>
      <li>راهنماهای شناور (Tooltips) برای درک بهتر تنظیمات پیشرفته.</li>
      <li>نمایش زنده و لحظه‌ای پیشرفت ترجمه در خروجی.</li>
    </ul>
  </li>
  <li><b>🔒 امنیت و حریم خصوصی:</b>
    <ul>
      <li>ابزار کاملاً در مرورگر شما و با استفاده از WebAssembly برای پردازش ویدیو اجرا می‌شود. کلید API گوگل، فایل‌های شما و سایر تنظیمات <b>فقط در کامپیوتر شما باقی مانده</b> و به هیچ سروری ارسال نمی‌گردد.</li>
    </ul>
  </li>
</ul>
</div>

<h2 align="right">🖥️ سازگاری مرورگر</h2>

<div dir="rtl">
این ابزار از تمام مرورگرهای مدرن دسکتاپ (Chrome, Firefox, Edge, Safari) پشتیبانی می‌کند.
<ul>
  <li><b>استفاده در کامپیوتر (توصیه شده):</b> برای بهترین عملکرد، به خصوص هنگام استخراج زیرنویس از فایل‌های ویدیویی، استفاده از نسخه دسکتاپ مرورگر توصیه می‌شود.</li>
  <li><b>استفاده در موبایل:</b>
    <ul>
      <li>ترجمه فایل‌های <code>srt</code> و <code>ass</code> روی تمام مرورگرهای موبایل به خوبی کار می‌کند.</li>
      <li><b>برای استخراج زیرنویس از فایل ویدیویی روی موبایل، استفاده از مرورگر Firefox به شدت توصیه می‌شود.</b> به دلیل مدیریت منابع بهتر، فایرفاکس این فرآیند سنگین را با موفقیت انجام می‌دهد، در حالی که سایر مرورگرها (مانند کروم) ممکن است به دلیل محدودیت‌های حافظه، بسیار کند عمل کرده یا فرآیند را متوقف کنند.</li>
    </ul>
  </li>
</ul>
</div>

<h2 align="right">🚀 راهنمای استفاده</h2>

<div dir="rtl">
استفاده از این ابزار بسیار ساده است:
<ol>
  <li><strong>دریافت کلید API:</strong> به <a href="https://aistudio.google.com/apikey" target="_blank"><strong>Google AI Studio</strong></a> بروید و یک کلید API رایگان بسازید. (به دلیل تحریم‌ها، استفاده از ابزار تغییر IP الزامی است).</li>
  <li><strong>ورود کلید:</strong> کلید API را در بخش مربوطه در صفحه ابزار وارد کنید.</li>
  <li><strong>انتخاب فایل:</strong> فایل زیرنویس (<code>srt</code>, <code>ass</code>) یا فایل ویدیویی (<code>mkv</code>, <code>mp4</code>) خود را بکشید و رها کنید یا آن را انتخاب نمایید. <strong>(فایل ویدیویی شما هرگز آپلود نمی‌شود و پردازش کاملاً در مرورگر شما انجام می‌گردد)</strong>.</li>
  <li><strong>(در صورت انتخاب ویدیو) انتخاب ترک:</strong> از لیستی که نمایش داده می‌شود، شماره ترک زیرنویس مورد نظر خود را برای ترجمه انتخاب کنید.</li>
  <li><strong>(اختیاری) تنظیمات پیشرفته:</strong> در صورت تمایل، مدل هوش مصنوعی، پرامپت سیستم، یا پارامترهای <code>Temperature</code> و <code>Top-P</code> را تغییر دهید.</li>
  <li><strong>شروع ترجمه:</strong> روی دکمه "شروع ترجمه" کلیک کنید. <strong>توجه داشته باشید که ابزار تغییر IP شما باید در تمام طول فرایند روشن بماند.</strong></li>
  <li><strong>دانلود فایل:</strong> پس از اتمام فرایند، پیشرفت به ۱۰۰٪ می‌رسد و می‌توانید فایل <code>srt</code> ترجمه‌شده و آماده را دانلود کنید.</li>
</ol>
</div>

<h2 align="right">🛠️ نحوه کارکرد</h2>

<div dir="rtl">
این ابزار از یک فرایند هوشمندانه برای دستیابی به بهترین نتیجه استفاده می‌کند:
<ol>
  <li><strong>انتخاب و تحلیل فایل:</strong> شما فایل زیرنویس (<code>srt</code>, <code>ass</code>) یا فایل ویدیویی (<code>mkv</code>, <code>mp4</code>) را انتخاب می‌کنید.</li>
  <li><strong>(در صورت باز کردن ویدیو) استخراج زیرنویس:</strong>
    <ul>
      <li>با استفاده از <b>FFprobe.wasm</b>، تمام ترک‌های فایل به صورت محلی در مرورگر شما تحلیل می‌شوند.</li>
      <li>لیست ترک‌های زیرنویس به شما نمایش داده شده و ترک مورد نظر را انتخاب می‌کنید.</li>
      <li>با استفاده از <b>FFmpeg.wasm</b>، ترک زیرنویس انتخابی از فایل ویدیویی استخراج می‌شود.</li>
    </ul>
  </li>
  <li><strong>پاکسازی و استانداردسازی:</strong> اگر فایل ورودی یا استخراج شده از نوع <code>ass</code> باشد، تمام استایل‌های آن حذف شده و به یک فرمت <code>srt</code> خالص و استاندارد تبدیل می‌شود.</li>
  <li><strong>تبدیل فرمت به MicroDVD:</strong> اسکریپت در مرورگر شما، فرمت <code>SRT</code> تمیز شده را به <code>MicroDVD</code> تبدیل می‌کند. این فرمت برای ارسال به مدل‌های زبان بزرگ مناسب‌تر است.</li>
  <li><strong>ارسال به API:</strong> فایل تبدیل شده زیرنویس به پرامپت انتخابی شما پیوست شده و به API گوگل Gemini ارسال می‌شود.</li>
  <li><strong>دریافت ترجمه:</strong> ترجمه به صورت جریانی (Stream) دریافت شده و به صورت زنده نمایش داده می‌شود.</li>
  <li><strong>تبدیل نهایی:</strong> پس از اتمام ترجمه، متن با فرمت <code>MicroDVD</code> به فرمت استاندارد <code>SRT</code> (با پشتیبانی کامل از زبان فارسی و UTF-8 و جهت‌دهی صحیح RTL) برگردانده می‌شود.</li>
  <li><strong>دانلود:</strong> فایل نهایی آماده دانلود است.</li>
</ol>
</div>
